import{s as K,o as O,b as Q}from"../chunks/scheduler.e108d1fd.js";import{S as X,i as Z,g as S,s as W,m as j,r as tt,h as A,y as Y,c as z,j as $,f,n as G,u as et,z as nt,k as F,a as U,x as d,v as ot,o as J,d as it,t as st,w as at}from"../chunks/index.a864fe6f.js";import{S as rt,N as lt,M as t}from"../chunks/neat.781449ad.js";function ct(C){let p,k="NEAT Demo: Biped Walker",_,r,y,E,o,s,R,b,m=C[1].generation+"",v,D,l,h,c,x,i,u,n,M=`body {
      max-width: unset;
    }
  `,w;return i=new rt({props:{neat:C[1]}}),{c(){p=S("h1"),p.textContent=k,_=W(),r=S("div"),y=S("div"),E=S("div"),o=W(),s=S("p"),R=j("Generation: "),b=S("b"),v=j(m),D=S("br"),l=j("Species: "),h=S("b"),c=j(C[2]),x=W(),tt(i.$$.fragment),u=W(),n=S("style"),n.textContent=M,this.h()},l(e){p=A(e,"H1",{class:!0,"data-svelte-h":!0}),Y(p)!=="svelte-1o6g869"&&(p.textContent=k),_=z(e),r=A(e,"DIV",{class:!0});var a=$(r);y=A(a,"DIV",{class:!0});var B=$(y);E=A(B,"DIV",{}),$(E).forEach(f),o=z(B),s=A(B,"P",{});var g=$(s);R=G(g,"Generation: "),b=A(g,"B",{});var T=$(b);v=G(T,m),T.forEach(f),D=A(g,"BR",{}),l=G(g,"Species: "),h=A(g,"B",{});var N=$(h);c=G(N,C[2]),N.forEach(f),g.forEach(f),B.forEach(f),x=z(a),et(i.$$.fragment,a),a.forEach(f),u=z(e);const I=nt("svelte-wjynzk",document.head);n=A(I,"STYLE",{"data-svelte-h":!0}),Y(n)!=="svelte-1uct9xx"&&(n.textContent=M),I.forEach(f),this.h()},h(){F(p,"class","svelte-4s2i8h"),F(y,"class","view svelte-4s2i8h"),F(r,"class","flex svelte-4s2i8h"),document.title="NEAT Demo: Biped Walker"},m(e,a){U(e,p,a),U(e,_,a),U(e,r,a),d(r,y),d(y,E),C[3](E),d(y,o),d(y,s),d(s,R),d(s,b),d(b,v),d(s,D),d(s,l),d(s,h),d(h,c),d(r,x),ot(i,r,null),U(e,u,a),d(document.head,n),w=!0},p(e,[a]){(!w||a&2)&&m!==(m=e[1].generation+"")&&J(v,m),(!w||a&4)&&J(c,e[2]);const B={};a&2&&(B.neat=e[1]),i.$set(B)},i(e){w||(it(i.$$.fragment,e),w=!0)},o(e){st(i.$$.fragment,e),w=!1},d(e){e&&(f(p),f(_),f(r),f(u)),C[3](null),at(i),f(n)}}}function dt(C,p,k){let _,r=new lt(4,30,[8,16,4]),y="";O(async()=>{const o=t.Engine.create();o.timing.timeScale=2;const s=t.Render.create({element:_,engine:o,options:{width:800,height:600,showAngleIndicator:!1,wireframes:!1}});s.context.textAlign="center",t.Render.run(s);const R=t.Runner.create();t.Runner.run(R,o),t.Render.lookAt(s,{min:{x:0,y:0},max:{x:800,y:600}});const b=t.Bodies.rectangle(400,600,800,50,{isStatic:!0,friction:1,frictionStatic:1e3});for(t.Composite.add(o.world,b);;){let m=1;await r.compete(v=>new Promise(D=>{const l={strokeStyle:"#ffffff",lineWidth:3,fillStyle:"#"+(16777216*Math.random()|0).toString(16).padStart(6,"0"),opacity:.4},h={group:-m,mask:1<<m|1,category:1<<m};m++;const c=t.Bodies.rectangle(100,450,20,70,{render:l,collisionFilter:h,friction:1,frictionStatic:1e3,density:1}),x=t.Bodies.rectangle(100,500,20,70,{render:l,collisionFilter:h,friction:1,frictionStatic:1e3,density:1}),i=t.Bodies.rectangle(150,450,20,70,{render:l,collisionFilter:h,friction:1,frictionStatic:1e3,density:1}),u=t.Bodies.rectangle(150,500,20,70,{render:l,collisionFilter:h,friction:1,frictionStatic:1e3,density:1}),n=t.Bodies.rectangle(125,400,75,50,{render:l,collisionFilter:h,density:1}),M=t.Constraint.create({bodyA:x,bodyB:c,pointA:{x:0,y:-35},pointB:{x:0,y:35},stiffness:1,length:0,render:l}),w=t.Constraint.create({bodyA:u,bodyB:i,pointA:{x:0,y:-35},pointB:{x:0,y:35},stiffness:1,length:0,render:l}),e=t.Constraint.create({bodyA:c,bodyB:i,pointA:{x:0,y:-35},pointB:{x:0,y:-35},stiffness:1,length:0,render:l}),a=t.Constraint.create({bodyA:n,bodyB:c,pointB:{x:0,y:-35},stiffness:1,length:0,render:l}),B=t.Constraint.create({bodyA:n,bodyB:i,pointB:{x:0,y:-35},stiffness:1,length:0,render:l}),g=t.Composite.create();t.Composite.add(g,[c,i,x,u,M,w,e,n,a,B]),t.Composite.add(o.world,g);const T=()=>{t.Composite.remove(o.world,g),t.Events.off(o,"beforeUpdate",I),t.Events.off(o,"collisionStart",H),clearTimeout(N),D(n.position.x)},N=setTimeout(T,5*1e3),I=()=>{s.context.fillStyle="white",s.context.fillText(v.name,n.position.x,n.position.y-40);const V=v.network.evaluate([x.position.x/800,x.position.y/800,c.position.x/800,c.position.y/800,u.position.x/800,u.position.y/800,i.position.x/800,i.position.y/800]);t.Body.setAngularVelocity(x,(V[0]-.5)/20),t.Body.setAngularVelocity(c,(V[1]-.5)/20),t.Body.setAngularVelocity(u,(V[2]-.5)/20),t.Body.setAngularVelocity(i,(V[3]-.5)/20),(n.position.x<0||n.position.y>c.position.y||n.position.y>i.position.y)&&T()},H=V=>{const L=V.pairs;for(let q=0;q<L.length;q++){const P=L[q];(P.bodyA===b||P.bodyB===b)&&(P.bodyA===n||P.bodyB===n)&&T()}};t.Events.on(o,"beforeUpdate",I),t.Events.on(o,"collisionStart",H)}),v=>{k(2,y=v.name)}),k(1,r),r.breed()}});function E(o){Q[o?"unshift":"push"](()=>{_=o,k(0,_)})}return[_,r,y,E]}class ht extends X{constructor(p){super(),Z(this,p,dt,ct,K,{})}}export{ht as component};
