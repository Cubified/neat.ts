import{s as V,o as G,b as W}from"../chunks/scheduler.e108d1fd.js";import{S as j,i as q,g as S,s as D,m as M,r as H,h as w,y as J,c as P,j as C,f as p,n as z,u as K,z as L,k as N,a as I,x as l,v as O,o as U,d as Q,t as X,w as Y}from"../chunks/index.a864fe6f.js";import{S as Z,N as ee,M as t}from"../chunks/neat.781449ad.js";function te(v){let c,k="NEAT Demo: Flappy Bird",u,i,d,x,n,s,$,g,r=v[1].generation+"",b,F,f,E,A,a,m,B,_;return m=new Z({props:{neat:v[1]}}),{c(){c=S("h1"),c.textContent=k,u=D(),i=S("div"),d=S("div"),x=S("div"),n=D(),s=S("p"),$=M("Generation: "),g=S("b"),b=M(r),F=S("br"),f=M("Species: "),E=S("b"),A=M(v[2]),a=D(),H(m.$$.fragment),B=D(),this.h()},l(e){c=w(e,"H1",{class:!0,"data-svelte-h":!0}),J(c)!=="svelte-71xevg"&&(c.textContent=k),u=P(e),i=w(e,"DIV",{class:!0});var o=C(i);d=w(o,"DIV",{class:!0});var h=C(d);x=w(h,"DIV",{}),C(x).forEach(p),n=P(h),s=w(h,"P",{});var y=C(s);$=z(y,"Generation: "),g=w(y,"B",{});var R=C(g);b=z(R,r),R.forEach(p),F=w(y,"BR",{}),f=z(y,"Species: "),E=w(y,"B",{});var T=C(E);A=z(T,v[2]),T.forEach(p),y.forEach(p),h.forEach(p),a=P(o),K(m.$$.fragment,o),o.forEach(p),B=P(e),L("svelte-1i1bwhh",document.head).forEach(p),this.h()},h(){N(c,"class","svelte-1h9fazb"),N(d,"class","view svelte-1h9fazb"),N(i,"class","flex svelte-1h9fazb"),document.title="NEAT Demo: Flappy Bird"},m(e,o){I(e,c,o),I(e,u,o),I(e,i,o),l(i,d),l(d,x),v[3](x),l(d,n),l(d,s),l(s,$),l(s,g),l(g,b),l(s,F),l(s,f),l(s,E),l(E,A),l(i,a),O(m,i,null),I(e,B,o),_=!0},p(e,[o]){(!_||o&2)&&r!==(r=e[1].generation+"")&&U(b,r),(!_||o&4)&&U(A,e[2]);const h={};o&2&&(h.neat=e[1]),m.$set(h)},i(e){_||(Q(m.$$.fragment,e),_=!0)},o(e){X(m.$$.fragment,e),_=!1},d(e){e&&(p(c),p(u),p(i),p(B)),v[3](null),Y(m)}}}function ne(v,c,k){let u,i=new ee(4,30,[3,4,1]),d="";G(async()=>{const n=t.Engine.create();n.timing.timeScale=1;const s=t.Render.create({element:u,engine:n,options:{width:400,height:600,showAngleIndicator:!1,wireframes:!1}});s.context.textAlign="center",t.Render.run(s);const $=t.Runner.create();t.Runner.run($,n),t.Render.lookAt(s,{min:{x:0,y:0},max:{x:400,y:600}});const g={strokeStyle:"#ffffff",lineWidth:3,opacity:.4},r=t.Bodies.rectangle(400,-200,50,1e3,{isStatic:!0,collisionFilter:{mask:3,category:1},render:{...g,fillStyle:"red"}}),b=t.Bodies.rectangle(400,1e3,50,1e3,{isStatic:!0,collisionFilter:{mask:3,category:1},render:{...g,fillStyle:"blue"}});t.Events.on(n,"beforeUpdate",()=>{if(t.Body.translate(r,{x:-2,y:0}),t.Body.translate(b,{x:-2,y:0}),r.position.x<=-25){const f=300*Math.random()-400;t.Body.setPosition(r,{x:425,y:f}),t.Body.setPosition(b,{x:425,y:f+1200})}}),t.Composite.add(n.world,[r,b]);const F={group:-1,mask:1,category:2};for(;;)await i.compete(f=>new Promise(E=>{const A={strokeStyle:"#ffffff",lineWidth:3,fillStyle:"#"+(16777216*Math.random()|0).toString(16).padStart(6,"0"),opacity:.4},a=t.Bodies.rectangle(200,r.position.y+600,20,20,{render:A,collisionFilter:F});t.Composite.add(n.world,a);const m=performance.now(),B=()=>{t.Composite.remove(n.world,a),t.Events.off(n,"beforeUpdate",_),t.Events.off(n,"collisionStart",e),E(performance.now()-m)},_=()=>{s.context.fillStyle="white",s.context.fillText(f.name,a.position.x,a.position.y+20),f.network.evaluate([a.position.y/600,r.position.x/400,r.position.y/600])[0]>.5&&t.Body.applyForce(a,a.position,{x:0,y:-.01}),(a.position.y<=0||a.position.y>=600)&&B()},e=o=>{const h=o.pairs;for(let y=0;y<h.length;y++){const R=h[y];(R.bodyA===a||R.bodyB===a)&&B()}};t.Events.on(n,"beforeUpdate",_),t.Events.on(n,"collisionStart",e)}),f=>{k(2,d=f.name)}),k(1,i),i.breed()});function x(n){W[n?"unshift":"push"](()=>{u=n,k(0,u)})}return[u,i,d,x]}class re extends j{constructor(c){super(),q(this,c,ne,te,V,{})}}export{re as component};
